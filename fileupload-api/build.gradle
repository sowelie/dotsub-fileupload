buildscript {
	ext {
		springBootVersion = '1.4.2.RELEASE'
	}
	repositories {
		mavenCentral()
	}
	dependencies {
		classpath("org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}")
	}
}

apply plugin: 'java'
apply plugin: 'idea'
apply plugin: 'org.springframework.boot'

ext {
	hibernateVersion = "5.2.4.Final"
	springVersion = "4.3.4.RELEASE"
}

jar {
	baseName = 'fileupload-api'
	version = '0.0.1-SNAPSHOT'
}
sourceCompatibility = 1.8
targetCompatibility = 1.8

repositories {
	mavenCentral()
}

configurations {
	dev
}

dependencies {
	compile	"org.springframework.boot:spring-boot-starter-web",
			"org.springframework:spring-orm:$springVersion",
			"org.hibernate:hibernate-core:$hibernateVersion",
			"org.hibernate:hibernate-java8:$hibernateVersion",
			'commons-dbcp:commons-dbcp:1.4',
			'commons-io:commons-io:2.4',
			'com.h2database:h2:1.4.193'

	testCompile 'org.springframework.boot:spring-boot-starter-test'
}

// run spring boot app
bootRun {
	//addResources = true
	classpath = sourceSets.main.runtimeClasspath + configurations.dev
}

// run all task
task runAll {}
runAll.dependsOn(bootRun)